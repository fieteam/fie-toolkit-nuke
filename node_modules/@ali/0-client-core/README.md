「零心」. Lynn's Heart
===

> 俗话说 : 北冥神器，其名为「零」，子嗣之多，不知其及千万也。
>
> Lynn, Well begin is half done.

### 开始之前

此源码为「零」的客户端核心实现(NodeJS)，传说中的「零心」。

### 主要功能

- **useAliGitlabSeed** : 使用一个Alibaba Gitlab 仓库中的种子文件（如: [seed/example-new](http://gitlab.alibaba-inc.com/seed/example-new) ）

- **processSeed** : 处理一个本地种子文件夹（适合处理解压过的种子或是本地开发种子）


### 安装配置

「零心」目前安放于TNPM中，安装方式如下：

	tnpm install @ali/0-client-core --save-dev
	
或是配置于package.json中作为依赖:

    {
        "name": "good-job",
        "version": "1.0.0",
        "dependencies": {
            "@ali/0-client-core" : "*"
        }
    }
    
再执行以下命令安装依赖:

	tnpm install

> 注意:

> 如果未安装TNPM，请运行 :

> **npm install tnpm -g --registry=http://registry.npm.alibaba-inc.com**

> 用户如果遇到权限问题 :

> OSX : 确保当前用户能够使用sudo，在命令前加入 **sudo** ，并输入sudo密码。

> Windows : 请提升报错文件夹 (如 : **C:\Program Files\nodejs** ) 的权限， 右键单击文件夹，选择 "属性->安全->编译"，添加当前用户为对此目录的权限可读写。

### 如何使用

> 您可以在「零心」模块的安装目录下创建一个js文件，将以下代码片段直接复制到其中运行即可体验效果，如果嫌麻烦，所有的示例代码都存于模块内部的playground文件夹中可供提取。

- 以下是一段使用 Alibaba Gitlab 种子的简洁示例代码，读取的仓库是 : [seed/example-new](http://gitlab.alibaba-inc.com/seed/example-new)   
  注意：因为是实时下载仓库内容，所以必须连接内网方可使用。  
       开发种子非常简单，拥有友好且宽松的接口设计(task.js)，基于[Gulp](http://www.gulpjs.com.cn/)，利于扩展，具体详情请参照此[示例种子](http://gitlab.alibaba-inc.com/seed/example-new)进行开发。

> node ./playground/demo-use-ali-gitlab-seed.js

```javascript
/**
 * 引入依赖
 */
var Core0 = require('@ali/0-client-core');

/**
 * 实例化「零心」
 */
var core = new Core0();

/**
 * 使用 Alibaba Gitlab 种子
 * 注意：请确保仓库权限为 Public + 可读
 * @param args {object} 参数集合
 * @param args.gitPath {string} git仓库地址，格式为: 组名/仓库名
 * @param args.params {object} 使用种子的参数
 * @param args.outputPath {string} 处理后输出地址
 * @return promise
 */
core.useAliGitlabSeed({
    gitPath : 'seed/example-new',
    outputPath : './output',
    params : {
        user : 'xunuo',
        module : 'example-demo',
        email : 'xunuo@email.com',
        info : {
            id : 9527,
            age : 20
        }
    }
}).then(function(cb){
    console.log(cb);
}).catch(function(error){
    console.log(error);
});

```

- 以下是一段处理本地种子(文件夹)的简洁示例代码，可以脱机使用，特别适合离线开发种子。

> node ./playground/demo-process-seed.js

```javascript
/**
 * 引入依赖
 */
var Core0 = require('@ali/0-client-core');

/**
 * 实例化「零心」
 */
var core = new Core0();

/**
 * 处理本地种子(文件夹)
 * @param args {object} 参数集合
 * @param args.seedPath {string} 处理的种子路径
 * @param args.outputPath {string} 处理后输出路径
 * @param [args.params] {json} 传入用于加工的参数
 * @return promise
 */

core.processSeed({
    seedPath : './playground/seed',
    outputPath : './playground/output',
    params : {
        user : 'xunuo',
        module : 'example-demo',
        email : 'xunuo@email.com',
        info : {
            id : 9527,
            age : 20
        }
    }
}).then(function(cb){
    console.log(cb);
},function(error){
    console.log(error);
});
```

> 至此，「零心」的所有功能已介绍完成，祝您使用愉快 :)